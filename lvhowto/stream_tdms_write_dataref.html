<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">
<title>Streaming External Data to a TDMS File (Windows)</title>
<meta http-equiv="Content-Style-Type" content="text/css"><link rel="STYLESHEET" type="text/css" href="minimal.css">
<script src="common.js" type="text/javascript"></script>
</head>

<body bgcolor="#ffffff">
<noscript>
<p class="Body">JavaScript is disabled. <a href="../lvhelp/JavaScript_Disabled.html">Details</a></p>
<hr width="100%" noshade>
</noscript>

<h1>Streaming External Data to a TDMS File (Windows)</h1>

<p class="Body">The following figure illustrates guidelines for using the <a href="../glang/tdms_advanced_functions_dataref.html">TDMS Advanced Data Reference I/O</a> functions to stream external data to a <a href="../lvhowto/NI_Test_Data_Exchange.html">.tdms</a> file.</p>

<img src="loc_bd_stream_tdms_write_dataref.gif">

<p class="Body">The following events occur in the previous figure:</p>

<table class="Borderless">
<tr>
<td><img style="display:inline" src="noloc_eps_callout_1.gif"></td>
<td>The <a href="../glang/tdms_adv_open.html">TDMS Advanced Open</a> function opens a <span class="Monospace">.tdms</span> file for the write operation and returns a reference to the <span class="Monospace">.tdms</span> file. If the specified file does not exist, this function creates the file.</td>
</tr>

<tr>
<td class="Borderless"><img style="display:inline" src="noloc_eps_callout_2.gif"></td>
<td class="Borderless">The <a href="../glang/tdms_set_channel_info.html">TDMS Set Channel Information</a> function specifies the channel information for the data you want to write to the <span class="Monospace">.tdms</span> file. The channel information includes channel names, the data type, and the number of data samples in each channel.</td>
</tr>

<tr>
<td class="Borderless"><img style="display:inline" src="noloc_eps_callout_3.gif"></td>
<td class="Borderless">The <a href="../glang/tdms_config_async_write_dataref.html">TDMS Configure Asynchronous Writes (Data Ref)</a> function specifies that LabVIEW can run eight asynchronous writes at most in the background. You must use this function to configure the asynchronous writes before streaming the external data. Errors occur if you do not include this function in your data-streaming application.</td>
</tr>

<tr>
<td class="Borderless"><img style="display:inline" src="noloc_eps_callout_4.gif"></td>
<td class="Borderless">(Recommended) The <a href="../glang/tdms_adv_reserve_file_size.html">TDMS Reserve File Size</a> function pre-allocates disk space for the data you want to write to the <span class="Monospace">.tdms</span> file. Pre-allocating disk space ensures optimal asynchronous writing performance.</td>
</tr>

<tr>
<td class="Borderless"><img style="display:inline" src="noloc_eps_callout_5.gif"></td>
<td class="Borderless">The <a href="../lvfpgahost/fpga_method_fifo_acqread.html" class="checkLink lvfpgahost">FIFO.Acquire Read Region</a> method requests a region to read from the host memory buffer in the target device driver and returns an <a href="../lvhowto/Types_of_Refnum_Controls.html">external data value reference</a> to this region.<table class="Borderless"><tr><td class="Icon"><img src="note.gif"></td><td><strong>Note</strong>&nbsp;&nbsp;You must have NI-RIO device drivers and the LabVIEW FPGA Module installed to <a href="../lvfpgaconcepts/fpga_dma_communication.html" class="checkLink lvfpgaconcepts">transfer data using direct memory access</a>.</td></tr></table></td>
</tr>

<tr>
<td class="Borderless"><img style="display:inline" src="noloc_eps_callout_6.gif"></td>
<td class="Borderless">The <a href="../glang/tdms_advanced_write_dataref.html">TDMS Advanced Asynchronous Write (Data Ref)</a> function iteratively streams the external data from the Acquire Read Region method to the <span class="Monospace">.tdms</span> file.</td>
</tr>

<tr>
<td class="Borderless"><img style="display:inline" src="noloc_eps_callout_7.gif"></td>
<td class="Borderless">(Optional) The <a href="../glang/tdms_get_async_write_status_dataref.html">TDMS Get Asynchronous Write Status (Data Ref)</a> function returns the number of pending writes that exist in the background.</td>
</tr>

<tr>
<td class="Borderless"><img style="display:inline" src="noloc_eps_callout_8.gif"></td>
<td class="Borderless">The <a href="../glang/tdms_advanced_close.html">TDMS Advanced Close</a> function closes the reference to the <span class="Monospace">.tdms</span> file that you opened in the first step.</td>
</tr>
</table>
</body>
</html>

