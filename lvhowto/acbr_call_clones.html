<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=Windows-1252">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="STYLESHEET" type="text/css" href="minimal.css">
<link rel="STYLESHEET" type="text/css" href="expandable_tree.css"><script src="common.js" type="text/javascript"></script><script src="dynamicjumps.js" type="text/javascript"></script><script src="expandable_tree.js" type="text/javascript"></script><title>Asynchronously Calling Multiple Instances of a VI for Parallel Execution</title>
</head>
<body>
<h1>Asynchronously Calling Multiple Instances of a VI for Parallel Execution</h1>
<p>By default, when you start multiple asynchronous calls to the same VI, LabVIEW serializes the calls, forcing them to run one at a time and leading to a longer cumulative execution time. Use the following procedure to execute the calls in parallel, preventing any one call from delaying the execution of another call.</p>


<a name="toUse"></a><h2>What to Use</h2>
<p>Use the following block diagram objects to dynamically start an asynchronous call to a <a href="../lvconcepts/reentrancy.html">reentrant VI</a> and then collect the outputs of the VI at a later time:</p>
<table class="Usage">
	<col class="Object">
	<col class="Spacer">
	<col class="Object">
	<col class="Spacer">
	<col class="Object">
	<col class="Spacer">
	<col class="Object">
	<col class="Spacer">
	<col class="Object">
	<tr><td><a href="../lvconcepts/Dynamic_LoadCall_VIs.html#Call_By_Reference_Nodes_and_Strictly_Typed_VI_Refnums">Strictly Typed VI Reference</a></td>
		<td></td>
		<td><a href="../glang/Open_VI_Reference.html">Open VI Reference</a></td>
		<td></td>
		<td><a href="../glang/start_asynchronous_call.html">Start Asynchronous Call</a></td>
		<td></td>
		<td><a href="../glang/wait_on_asynchronous_call.html">Wait On Asynchronous Call</a></td>
		<td></td>
		<td><a href="../glang/Close_LV_Object_Reference.html">Close Reference</a></td>
	</tr>
	<tr><td><img src="noloc_icon_strictly_typed_reference.gif"></td>
	<td></td>
	<td><img src="noloc_icon_open_vi_reference.gif"></td>
	<td></td>
		<td><img src="noloc_icon_start_async_call.gif"></td>
		<td></td>
		<td><img src="noloc_icon_wait_on_async_call.gif"></td>
		<td></td>
		<td><img src="noloc_icon_close_reference.gif"></td>
	</tr>
	<tr><td><a href="../lvhowto/Create_Strict_Type_VI_Ref.html">Create</a></td>
		<td></td>
		<td><table><tr><td><SPAN title=" Add to the block diagram "><a href="javascript:placeObject(object708);"><img src="add.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Add</SPAN> </td><td>
<SPAN title=" Find on the palette "><a href="javascript:findObject(object708);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find</SPAN></td></tr></table>
		</td>
		<td></td>
		<td><table><tr><td><SPAN title=" Add to the block diagram "><a href="javascript:placeObject(object5596);"><img src="add.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Add</SPAN> </td><td>
<SPAN title=" Find on the palette "><a href="javascript:findObject(object5596);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find</SPAN></td></tr></table>
		</td>
		<td></td>
		<td><table><tr><td><SPAN title=" Add to the block diagram "><a href="javascript:placeObject(object5597);"><img src="add.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Add</SPAN> </td><td>
<SPAN title=" Find on the palette "><a href="javascript:findObject(object5597);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find</SPAN></td></tr></table>
		</td>
		<td></td>
		<td><table><tr><td><SPAN title=" Add to the block diagram "><a href="javascript:placeObject(object709);"><img src="add.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Add</SPAN> </td><td>
<SPAN title=" Find on the palette "><a href="javascript:findObject(object709);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find</SPAN></td></tr></table>
		</td>
	</tr>
</table>


<a name="toDo"></a><h2>What to Do</h2>

<p>Create the following block diagram to start multiple asynchronous calls to a reentrant VI and then collect the results.</p>

<img src="loc_eps_acbr_reentrant_loops.gif">
<p>The following list describes important details about the previous diagram.</p>
<table><tr><td><img src="noloc_eps_callout_1.gif"></td>
			<td>Configure the VI specified by <strong>vi path</strong> for <a href="../lvconcepts/FAQ_SubVIs.html#What_Are_Reentrant_VIs_">reentrant execution</a> by selecting either <strong>Shared clone reentrant execution</strong> or <strong>Preallocated clone reentrant execution</strong> on the <a href="../lvdialog/Execution.html">Execution</a> page of the <a href="../lvdialog/VI_Properties_Dialog_Box.html">VI Properties</a> dialog box.</td>

	</tr>
	<tr>
		<td><img src="noloc_eps_callout_2.gif"></td>
		<td><a href="../lvhowto/combining_options.html">Include the <span class="Monospace">0x40</span> flag</a> as part of the <strong>options</strong> input to the Open VI Reference function. LabVIEW requires this option flag to start simultaneous calls with the reentrant VI reference. Otherwise, LabVIEW serializes the calls.


<!-- begin-parent: ../lvhowto/acbr_call_and_collect.html-->
<table class="Borderless">
<tr>
<td class="Icon"><img src="note.gif" alt="Note"></td>
<td><strong>Note</strong>&nbsp;&nbsp;The <cite>LabVIEW Help</cite> displays each of the <a href="../glang/Open_VI_Reference.html#options">option flags</a> for the Open VI Reference function in hexadecimal representation. Therefore, always <a href="../lvhowto/Changing_Format_and_Prec.html">change the display format</a> of the Numeric Constant input to hexadecimal to ensure that you are passing the correct value.</td>
</tr>
</table>
<!-- end-parent: ../lvhowto/acbr_call_and_collect.html--></td>
	</tr>
	<tr>
		<td><img src="noloc_eps_callout_3.gif"></td>
		<td>You can <a href="../lvhowto/combining_options.html">combine option flags</a> to specify multiple characteristics of the target VI reference. In this use case, combining the 0x100 option flag with the 0x40 option flag configures LabVIEW to call-and-collect simultaneous calls to the VI.</td>
	</tr>
	<tr>
		<td><img src="noloc_eps_callout_4.gif"></td>
		<td>Use the same number of Wait On Asynchronous Call nodes as the number of Start Asynchronous Call nodes for a specific reference.</td>
	</tr>
	<tr>
		<td><img src="noloc_eps_callout_5.gif"></td>
		<td>When you include the 0x40 option flag, the Start Asynchronous Call node calls a clone of the target VI rather than the target VI itself. Refer to the <a href="../lvhowto/acbr_call_clones.html#caveats">Caveats and Recommendations</a> for the ramifications of calling a clone VI.</td>
	</tr>
	<tr>
		<td><img src="noloc_eps_callout_6.gif"></td>
		<td>If you start multiple calls to the same VI reference, you cannot directly identify which instance of the VI returns its outputs to a specific Wait On Asynchronous Call function. <a href="../lvconcepts/asynchronous_vi_calls.html#pool">Assign an identifier to a VI call</a> if you need to know which instance of the VI returned.</td>
	</tr>
	<tr>
		<td><img src="noloc_eps_callout_7.gif"></td>
		<td>Close each open VI reference with the <a href="../glang/Close_LV_Object_Reference.html">Close Reference</a> function after you collect the results.</td>
	</tr>
</table>


<table class="Borderless">
<tr>
<td class="Icon"><img src="note.gif" alt="Note"></td>
<td><strong>Note</strong>&nbsp;&nbsp;If you want to <a href="../lvhowto/acbr_call_and_forget.html">ignore the results of the asynchronous calls</a>, omit the Wait On Asynchronous Call node and include the <span class="Monospace">0x80</span> option flag instead of the <span class="Monospace">0x100</span> option flag.</td>
</tr>
</table>


<a name="caveats"></a><h2>Caveats and Recommendations</h2>
<p>VI Server properties and methods cannot modify parallel instances of an asynchronous VI call. If you call a VI Server property or method on a 0x40 VI reference, the property or method cannot modify the VI clone that the Start Asynchronous Call node actually calls. Instead, the property or method affects the original target VI. To apply VI Server properties or methods to the VI clone that the Start Asynchronous Call node actually calls, call the property or method within the target VI itself.</p>

<a name="examples"></a><h2>Examples</h2>
<p class="Body">Refer to the Asynchronous Call and Collect (Using Option 0x40) VI in the <span class="Monospace">labview\examples\Application Control\VI Server\Asynchronous Call By Reference</span> directory for an example of asynchronously calling parallel instances of a VI to reduce execution time.</p>
<p class="Body"><a href="javascript:openVI('examples%5C%5CApplication%20Control%5C%5CVI%20Server%5C%5CAsynchronous%20Call%20By%20Reference%5C%5CAsynchronous%20Call%20and%20Collect%20(Using%20Option%200x40).vi');"><img src="open.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Open example&nbsp;<a href="javascript:findExamples(3072);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find related examples</p>

<p class="Body">Refer to the Benchmarking Asynchronous Calls VI in the <span class="Monospace">labview\examples\Application Control\VI Server\Asynchronous Call By Reference</span> directory for a comparison of several synchronous and asynchronous approaches to solving the same task.</p>
<p class="Body"><a href="javascript:openVI('examples%5C%5CApplication%20Control%5C%5CVI%20Server%5C%5CAsynchronous%20Call%20By%20Reference%5C%5CBenchmarking%20Asynchronous%20Calls.vi');"><img src="open.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Open example&nbsp;<a href="javascript:findExamples(3072);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find related examples</p>


</body>
</html>

