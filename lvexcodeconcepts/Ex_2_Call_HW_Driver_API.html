<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!-- Generated from Shared_Libraries_DLLs.xml. Edit in the XML file; do not edit this file.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">

<title>Example 2: Call a Hardware Driver API</title>
<link rel="STYLESHEET" type="text/css" href="minimal.css">
<script src="common.js" type="text/javascript"></script><script src="dynamicjumps.js" type="text/javascript"></script></head>
<body>
<noscript>
<p class="Body">JavaScript is disabled. <a href="../lvhelp/JavaScript_Disabled.html">Details</a></p>
<hr width="100%" noshade>
</noscript><a name="Example_2__Call_a_Hardware_Driver_API"></a><h1>Example 2: Call a Hardware Driver API</h1>
<p class="Body">
				You might want to access an API associated with hardware you have purchased. In this example, you call a hypothetical interface card for a databus called X-bus.</p>
<table class="Borderless">
<tr>
<td class="Icon"><img src="note.gif"></td>
<td><strong>Note</strong>��You do not need to use the <a href="../glang/Call_Library_Function.html">Call Library Function Node</a> to gain access to the APIs of National Instruments hardware. All National Instruments products come with LabVIEW interfaces.</td>
</tr>
</table><a name="Configure_the_Call_Library_Function_Node"></a><h2>Configure the Call Library Function Node</h2>
<p class="Body">The X-bus interface card comes with a software driver for your operating system. The X-bus documentation provides the following standard information:</p>
<ul>
<li>A listing of all functions you can use to access the hardware</li>
<li>Description of the shared library file <span class="Monospace">xbus.dll</span> that contains these functions</li>
<li>Instructions on including a header file <span class="Monospace">xbus.h</span>
					<table class="Borderless">
<tr>
<td class="Icon"><img src="note.gif"></td>
<td><strong>Note</strong>��Although LabVIEW does not permit you to include such header files, you can open header files and extract information about function prototypes and constants.</td>
</tr>
</table>
				</li>
<li>
					<span class="Platform">(Windows)</span> A statement about the Standard (<span class="Monospace">__stdcall</span>) calling convention that the X-bus library uses</li>
</ul>
<p class="Body">One of the functions you want to use with this hypothetical hardware is <span class="Monospace">XBusRead16</span>, which reads a 16-bit integer from a certain address. The documentation describes <span class="Monospace">XBusRead16</span> as follows:</p>
<table class="Bordered">
<tr>
<td class="Bordered"><span class="Monospace">long XBusRead16(unsigned long offset, short*data);</span></td>
<td class="Bordered">Puts 16 bits from the register at "offset" into the memory location pointed to by "data." Returns 1 if successful, or 0 if it fails.</td>
</tr>
</table>
<p class="Body">Given the preceding information from the X-bus documentation, complete the following steps to configure the LabVIEW Call Library Function Node.</p>
<ol>
<li>Open a new, blank VI and save the VI as Read Data.</li>
<li>Place a Call Library Function Node on the block diagram.</li>
<li>Right-click the Call Library Function Node object and select <strong>Configure</strong> from the shortcut menu.</li>
<li>Make the following settings in the <a href="../lvdialog/Call_Lib_Function_DB.html">Call Library Function</a> dialog box: <ol>
<li>Enter <span class="Monospace">XbusRead16</span> in the <strong>Function name</strong> control.</li>
<li>Select the <strong>stdcall (WINAPI)</strong> control from the <strong>Calling Convention</strong> field.</li>
<li>Navigate to the <strong>Parameters</strong> page of the <strong>Call Library Function</strong> dialog box. Select <strong>Numeric</strong> from the <strong>Type</strong> pull-down menu for return type.</li>
<li>Select <strong>Signed 32-bit Integer</strong> from the <strong>Data Type</strong> pull-down menu for return type.</li>
<li>Add a parameter and name it <strong>offset</strong>.</li>
<li>Select <strong>Numeric</strong> from the <strong>Type</strong> pull-down menu.</li>
<li>Select <strong>Unsigned 32-bit Integer</strong> from the	<strong>Data Type</strong> pull-down menu.</li>
<li>Add a parameter and name it <strong>data</strong>.</li>
<li>Select <strong>Numeric</strong> from the <strong>Type</strong> pull-down menu.</li>
<li>Select <strong>Signed 16-bit Integer</strong> from the <strong>Data Type</strong> pull-down menu.</li>
<li>Select <strong>Pointer to Value</strong> from the <strong>Pass</strong> pull-down menu.</li>
</ol>
				</li>
<li>Inspect the function prototype that appears in the <strong>Function Prototype</strong> field. If the prototype you see does not match the definition of the function in the API you are calling, you must change your settings in the <strong>Call Library Function </strong>dialog box.</li>
</ol>
<p class="Body">Place a numeric control, numeric indicator, and round LED indicator on the front panel window. Label the control and indicators and complete the block diagram as shown in the following block diagram and front panel.</p>
<p class="Anchor"><img src="loc_bd_xbusdll.gif"></p>
<p class="Anchor"><img src="loc_fp_xbusdll.gif"></p>
</body>
</html>