<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><head><!--Generated from database. Edit in the database; do not edit this file.--><!--Poly VI id="3858"--><!--LabVIEW VI path:vi.lib\addons\control\pid\pid.llb\PID Advanced.vi--><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252"><meta http-equiv="Content-Style-Type" content="text/css"><TITLE>PID Advanced VI</TITLE><link rel="STYLESHEET" type="text/css" href="minimal.css"><script src="common.js" type="text/javascript"></script><script src="polyviselect.js" type="text/javascript"></script><script src="jquery-1.7.2.min.js" type="text/javascript"></script><script src="cssframes.js" type="text/javascript"></script><link media="print" rel="stylesheet" type="text/css" href="print.css"></head><body bgcolor="#ffffff"><noscript><p class="Body">JavaScript is disabled. <a href="../lvhelp/JavaScript_Disabled.html">Details</a></p><hr width="100%" noshade></noscript><div id="styleDivTitle"><!-- VI or Function Name --><H1>PID Advanced VI</H1><!--Owning Palette--><p class="Body"><strong>Owning Palette:</strong> <a href="../lvpid/PIDTitle.html">PID VIs</a></p><!--Package and Platform--><p class="Body"><strong>Requires:</strong> Full Development System</p><!-- VI/Function Description --><p class="Body">Implements a PID controller using a PID algorithm with advanced optional features. The <a href="../lvpidmain/pid_adv_alg.html">advanced PID algorithm</a> includes the features of the algorithm the <a href="../lvpid/PID_VI.html">PID</a> VI uses, as well as manual mode control with bumpless manual-to-automatic transitions, nonlinear integral action, two degree-of-freedom control, and error-squared control. Use the DBL instance of this VI to implement a single control loop. Use the DBL Array instance to implement parallel <a href="../lvpidmain/multiloop_control.html">multi-loop control</a>.</p><!-- Supplemental VI/Function Information --><!-- Link to Additional VI/Function Information --><p class="Body"><a href="#details">Details</a>&nbsp;&nbsp;<a href="#examples">Example</a></p><!--Instance drop-down list--><p class="Body">Use the pull-down menu to select an instance of this VI.</p><table class="Borderless">   <tr>   <td>      <select name="site" size="1" onchange="polyVISelectHandler(this)">      <option value="">Select an instance</option>      <option value="#parent">PID Advanced (DBL)</option><option value="#instance1">PID Advanced (DBL Array)</option></select>   </td>      </tr>   </table><!--Add/Find Buttons--><table class="Borderless"><tr><td><a href="javascript:placeObject(object3858);"><img src="add.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Add to the block diagram</td><td><a href="javascript:findObject(object3858);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find on the palette</td></tr></table></div><div id="styleDivScrolling"><!--Parent Link Text --><h2><a name="parent">PID Advanced (DBL)</a></h2><!-- Instance 1 Note --><!-- Parent Graphic Reference --><p class="Anchor"><img src="PIDAdvanced_DBLc.gif"></p><!-- Table of VI/Function Parameters --><table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>alpha</strong> specifies the derivative filter time constant. Increasing this value increases damping of derivative action. <strong>alpha</strong> can be a value between 0 and 1 or <span class="Monospace">NaN</span>, which specifies that no derivative filter is applied.</td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>gamma</strong> specifies an amount by which to weight the error applied to derivative action. The default value is 0, which avoids the <a href="../lvpidmain/pid_glossary.html#derivkick">derivative kick</a>, or sudden change in controller output, that can occur after a change in the setpoint value.<br><br>In certain <a href="../lvpidmain/pid_glossary.html#casccont">cascade control</a> operations where derivative kick is not a concern, increasing <strong>gamma</strong> might improve the speed of the first PID controller. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>manual control</strong> specifies the value of the control output when <strong>auto?</strong> is FALSE. </td></tr><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>auto?</strong> specifies whether to use automatic or manual control. In some situations, you might need to switch off the PID controller and operate the system in manual, or open-loop, mode. The default is TRUE. When <strong>auto?</strong> is TRUE, this VI uses automatic control. When <strong>auto?</strong> is FALSE, this VI uses manual control. This VI uses bumpless transfer from manual control to automatic control.</td></tr><tr><td class="Icon"><img src="cnclst.gif"></td><td><strong>output range</strong> specifies the range to which to coerce the control output. The default range is &#8211;100 to 100, which corresponds to values specified in terms of percentage of full scale. You can change this range to something that is appropriate for your control system. For example, you can <a href="../lvpidmain/percent_to_eng.html">relate engineering units to engineering units</a> instead of percentage to percentage. This VI implements <a href="../lvpidmain/pid_vi_algs.html#outlimit">integrator anti-windup</a> when the controller output is saturated at the specified minimum or maximum values.<table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>output high</strong> specifies the maximum value of the controller output. The default is 100. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>output low</strong> specifies the minimum value of the controller output. The default is &#8211;100. </td></tr></table></td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>setpoint</strong> specifies the setpoint value, or desired value, of the process variable being controlled. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>process variable</strong> specifies the measured value of the process variable being controlled. This value is equal to the feedback value of the feedback control loop. </td></tr><tr><td class="Icon"><img src="cnclst.gif"></td><td><strong>setpoint range</strong> specifies the maximum and minimum values for the setpoint/process variable range. This VI uses the <strong>setpoint range</strong> to calculate nonlinear integral action. The default range is 0 to 100, which corresponds to values specified in terms of percentage of full scale. You can change this range to something that is appropriate for your control system. For example, you can relate engineering units to engineering units instead of percentage to percentage. This VI uses the <strong>setpoint range</strong> in the nonlinear integral action calculation and the <a href="../lvpidmain/pid_adv_alg.html#errorcalc">nonlinear error calculation</a>.<table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>setpoint low</strong> specifies the minimum value of the setpoint/process variable range. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>setpoint high</strong> specifies the maximum value of the setpoint/process variable range. </td></tr></table></td></tr><tr><td class="Icon"><img src="cnclst.gif"></td><td><strong>PID gains</strong> specifies the proportional gain, integral time, and derivative time parameters of the controller. <table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>proportional gain (Kc)</strong> specifies the proportional gain of the controller. The default is 1. In the equation that defines the PID controller,<em> K<sub>C</sub></em> represents the proportional gain.</td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>integral time (Ti, min)</strong> specifies the integral time in minutes. The default is 0.01. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>derivative time (Td, min)</strong> specifies the derivative time in minutes. The default is 0. </td></tr></table></td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>dt (s)</strong> specifies the loop-cycle time, or interval in seconds, at which this VI is called. If <strong>dt (s)</strong> is less than or equal to zero, this VI calculates the time since it was last called using an internal timer with 1 ms resolution. If <strong>dt (s)</strong> must be less than 1 ms, specify the value explicitly. The default is -1. </td></tr><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>reinitialize?</strong> specifies whether to reinitialize the internal parameters, such as the integrated error, of the controller. Set <strong>reinitialize?</strong> to TRUE if your application must stop and restart the control loop without restarting the entire application. The default is FALSE. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>beta</strong> specifies the relative emphasis of setpoint tracking to disturbance rejection. The default value of 1 is appropriate for most applications. You can use a smaller value between 0 and 1 to specify emphasis on disturbance rejection, such as process load changes. The VI uses this value in the two degree-of-freedom algorithm.</td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>linearity</strong> specifies the linearity of the error response. The valid range for <strong>linearity</strong> is 0 to 1. A value of 1 provides a normal linear response, while a value of 0.1 provides an approximately parabolic response. The VI uses this value in the nonlinear error calculation and the nonlinear gain factor calculation.</td></tr><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>output</strong> returns the control output of the PID algorithm that is applied to the controlled process. If this VI receives an invalid input, <strong>output</strong> returns <span class="Monospace-Bold">NaN</span>. </td></tr><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>dt out (s)</strong> returns the actual time interval in seconds. <strong>dt out (s)</strong> returns either the value of <strong>dt (s)</strong> or the computed interval if you set <strong>dt (s)</strong> to &#8211;1. </td></tr></table><!-- Instance 1 Link Text --><h2><a name="instance1">PID Advanced (DBL Array)</a></h2><!--LabVIEW VI Inst Path:vi.lib\addons\control\pid\pid.llb\PID Advanced (DBL Array).vi--><!-- Instance 1 Note --><!-- Instance 1 Graphic Reference --><p class="Anchor"><img src="PIDAdvanced_DBLArrayc.gif"></p><!-- Table of VI/Function Parameters for Instance 1 --><table class="Borderless"><tr><td class="Icon"><img src="c1ddbl.gif"></td><td><strong>gamma</strong> specifies an amount by which to weight the error applied to derivative action. The default value is 0, which avoids the <a href="../lvpidmain/pid_glossary.html#derivkick">derivative kick</a>, or sudden change in controller output, that can occur after a change in the setpoint value.<br><br>In certain <a href="../lvpidmain/pid_glossary.html#casccont">cascade control</a> operations where derivative kick is not a concern, increasing <strong>gamma</strong> might improve the speed of the first PID controller. This VI resizes the <strong>gamma</strong> input array to match the size of the <strong>process variable</strong> input array.</td></tr><tr><td class="Icon"><img src="c1ddbl.gif"></td><td><strong>manual control</strong> specifies the value of the control output when <strong>auto?</strong> is FALSE. This VI resizes the <strong>manual control</strong> input array to match the size of the <strong>process variable</strong> input array. </td></tr><tr><td class="Icon"><img src="c1dbool.gif"></td><td><strong>auto?</strong> specifies whether to use automatic or manual control. When <strong>auto?</strong> is�TRUE, this VI uses automatic control. When <strong>auto?</strong> is FALSE, this VI uses manual control. This VI uses bumpless transfer from manual control to automatic control. The default is TRUE.<br><br>This VI resizes the <strong>auto?</strong> input array to match the size of the <strong>process variable</strong> input array. </td></tr><tr><td class="Icon"><img src="c1dnclst.gif"></td><td><strong>output range</strong> specifies the range to which to coerce the control output. The default range is -100 to 100, which corresponds to values specified in terms of percentage of full scale. You can change this range to something that is appropriate for your control system. For example, you can relate engineering units to engineering units instead of percentage to percentage. This VI implements <a href="../lvpidmain/pid_vi_algs.html#outlimit">integrator anti-windup</a> when the controller output is saturated at the specified minimum or maximum values.<br><br><strong>output range</strong> is an array of clusters of the following elements.<table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>output high</strong> specifies the maximum value of the controller output. The default is 100. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>output low</strong> specifies the minimum value of the controller output. The default is &#8211;100. </td></tr></table></td></tr><tr><td class="Icon"><img src="c1ddbl.gif"></td><td><strong>setpoint</strong> specifies the setpoint value, or desired value, of the process variable being controlled. This VI resizes the <strong>setpoint</strong> input array to match the size of the <strong>process variable</strong> input array. </td></tr><tr><td class="Icon"><img src="c1ddbl.gif"></td><td><strong>process variable</strong> specifies the measured value of the process variable being controlled. This value is equal to the feedback value of the feedback control loop. </td></tr><tr><td class="Icon"><img src="cnclst.gif"></td><td><strong>setpoint range</strong> specifies the maximum and minimum values for the setpoint/process variable range. This VI uses the <strong>setpoint range</strong> to calculate nonlinear integral action. The default range is 0 to 100, which corresponds to values specified in terms of percentage of full scale. You can change this range to something that is appropriate for your control system. For example, you can relate engineering units to engineering units instead of percentage to percentage. This VI uses the <strong>setpoint range</strong> in the nonlinear integral action calculation and the <a href="../lvpidmain/pid_adv_alg.html#errorcalc">nonlinear error calculation</a>.<table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>setpoint low</strong> specifies the minimum value of the setpoint/process variable range. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>setpoint high</strong> specifies the maximum value of the setpoint/process variable range. </td></tr></table></td></tr><tr><td class="Icon"><img src="c1dnclst.gif"></td><td><strong>PID gains</strong> is an array of clusters of the following elements. <table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>proportional gain (Kc)</strong> specifies the proportional gain of the controller. The default is 1. In the equation that defines the PID controller,<em> K<sub>C</sub></em> represents the proportional gain.</td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>integral time (Ti, min)</strong> specifies the integral time in minutes. The default is 0.01. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>derivative time (Td, min)</strong> specifies the derivative time in minutes. The default is 0. </td></tr></table></td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>dt (s)</strong> specifies the loop-cycle time, or interval in seconds, at which this VI is called. If <strong>dt (s)</strong> is less than or equal to zero, this VI calculates the time since it was last called using an internal timer with 1 ms resolution. If <strong>dt (s)</strong> must be less than 1 ms, specify the value explicitly. The default is -1. </td></tr><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>reinitialize?</strong> specifies whether to reinitialize the internal parameters, such as the integrated error, of the controller. Set <strong>reinitialize?</strong> to TRUE if your application must stop and restart the control loop without restarting the entire application. The default is FALSE. </td></tr><tr><td class="Icon"><img src="c1ddbl.gif"></td><td><strong>beta</strong> specifies the relative emphasis of disturbance rejection to setpoint tracking. The default value of 1 is appropriate for most applications. You can use a smaller value between 0 and 1 to specify emphasis on disturbance rejection, such as process load changes. This VI resizes the <strong>beta</strong> input array to match the size of the <strong>process variable</strong> input array. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>linearity</strong> specifies the linearity of the error response. The valid range for <strong>linearity</strong> is 0 to 1. A value of 1 provides a normal linear response, while a value of 0.1 provides an approximately parabolic response. The VI uses this value in the nonlinear error calculation and the nonlinear gain factor calculation.</td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>output</strong> returns the control output of the PID algorithm that is applied to the controlled process. This VI determines the length of the <strong>output</strong> array from the size of the <strong>process variable</strong> input array. </td></tr><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>dt out (s)</strong> returns the actual time interval in seconds. <strong>dt out (s)</strong> returns either the value of <strong>dt (s)</strong> or the computed interval if you set <strong>dt (s)</strong> to &#8211;1. </td></tr></table><!-- Additional VI/Function Information --><h2><a name="details">PID Advanced Details</a></h2><p class="Body">You can use the DBL Array instance of this polymorphic VI in multi-loop PID control applications. In this case, the length of the <strong>process variable</strong> input determines the length of the output array. Other input arrays do not necessarily need to be the same length as the <strong>process variable</strong> input. This VI resizes other input arrays to the same length as the <strong>process variable</strong> input as follows:</p><ul><li>If the input array is longer than the <strong>process variable</strong> input, the input array is truncated to the length of the <strong>process variable</strong> input. Additional values in the array are not used.</li><li>If the input array is shorter than the <strong>process variable</strong> input, the last value of the input array is repeated until the size matches that of the <strong>process variable</strong> input.</li></ul><p class="Body">In this manner, an input value that must be used for each output calculation does not need to be specified repeatedly in the array passed into this VI. Instead, the array can consist of a single value that is used for each output calculation.</p><h3>Bumpless Manual-to-Automatic Transfer</h3><p class="Body">This VI supports bumpless manual-to-automatic transfer, which ensures a smooth controller output during the transition from manual to automatic control mode.</p><h3>Bumpless Automatic-to-Manual Transfer</h3><p class="Body">This VI cannot implement bumpless automatic-to-manual transfer. To ensure a smooth transition from automatic to manual control mode, you must design your application so that the manual output value matches the control output value at the time that the control mode switches from automatic to manual. You can do this by using a local variable for <strong>manual control</strong>, as shown in the following block diagram.</p><img src="loc_bd_bumpless_auto_to_man.gif"><!--Module Specific Content--><script type="text/javascript">if (typeof(writeVarRefs)=="function"){writeVarRefs("3858");}</script><!-- Example Information --><h2><a name="examples">Example</a></h2><p class="Body">Refer to the Manual-Automatic Control VI in the <span class="Monospace">labview\examples\control\PID</span> directory for an example of using the PID Advanced VI.</p><p class="Body"><a href="javascript:openVI('examples%5C%5Ccontrol%5C%5CPID%5C%5CManual-Automatic%20Control.vi');"><img src="open.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Open example&nbsp;<a href="javascript:findExamples(1699);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find related examples</p></div></body></HTML>