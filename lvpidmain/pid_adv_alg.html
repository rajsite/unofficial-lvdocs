<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!-- Generated from lvpidmain.xml. Edit in the XML file; do not edit this file.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252">

<title>Advanced PID Algorithm</title>
<link rel="STYLESHEET" type="text/css" href="minimal.css">
<script src="common.js" type="text/javascript"></script><script src="dynamicjumps.js" type="text/javascript"></script></head>
<body>
<noscript>
<p class="Body">JavaScript is disabled. <a href="../lvhelp/JavaScript_Disabled.html">Details</a></p>
<hr width="100%" noshade>
</noscript><h1>Advanced PID Algorithm</h1>
<p class="Body">The <a href="../lvpid/PIDAdvanced.html">PID Advanced</a> VI uses the same algorithm and assumptions as the <a href="pid_vi_algs.html">PID VIs algorithm</a>, but adds the functionality described in the following sections.</p>
<p class="Body">The following simulation diagram represents the PID implementation provided by the <a href="../lvpid/PIDAdvanced.html">PID Advanced</a> VI:</p>
<p class="Anchor"><img src="loc_bd_pid_adv_alg.gif"></p>
<table class="Borderless">
<tr>
<td class="Icon"><img src="note.gif"></td>
<td><strong>Note</strong>��Constructing a simulation diagram like the one in the previous image requires the <a href="../lvsimconcepts/SIM_C_Intro.html" class="checkLink lvsimconcepts">LabVIEW Control Design and Simulation Module</a>. However, the <a href="../lvpid/PIDTitle.html">PID</a> VIs implement PID controllers for you. You do not need the Control Design and Simulation Module to build PID controllers. Refer to the <a href="javascript:WWW(WWW_ControlDesign)">National Instruments website</a> at <span class="Monospace">ni.com</span> for more information about the Control Design and Simulation Module.</td>
</tr>
</table><a name="manauto"></a><h2>Manual/Automatic Operation</h2>
<p class="Body">In some situations, you might need to switch off the PID controller and operate the system in open-loop, or manual, mode. The <a href="../lvpid/PIDAdvanced.html">PID Advanced</a> VI uses a method similar to the <a href="pid_vi_algs.html#outlimit">anti-windup algorithm</a> to ensure the transition between manual and automatic modes does not cause any bump to the output of the controller.</p><a name="setweight"></a><h2>Setpoint Weighting for Proportional Action and Derivative Action</h2>
<p class="Body">Setpoint weighting refers to corrections applied to the error value of the controller. The <strong>beta</strong> input (&#914;), which can range between 0 and 1, is applied to the proportional action as:</p>
<p class="Anchor"><img src="loc_eq_setpointweight.gif"></p>
<table class="Borderless">
<tr>
<td>where</td>
<td><em>e</em> is the error</td>
</tr>
<tr>
<td></td>
<td><em>SP</em> is the setpoint</td>
</tr>
<tr>
<td></td>
<td><em>PV</em> is the process variable</td>
</tr>
<tr>
<td></td>
<td><em>K<sub>c</sub></em> is controller gain</td>
</tr>
</table>
<p class="Body">You can use the <strong>beta</strong> input to reduce the overshoot of setpoint change and to allow increasing the gain of the controller to improve the disturbance rejection of the controller.</p>
<p class="Body">The <strong>gamma</strong> (&#947;) input, which also can range between 0 and 1, is applied to the error and to the derivative as:</p>
<p class="Anchor"><img src="loc_eq_spgamma.gif"></p><a name="filter"></a><h2>Filter for Derivative Action (<img style="display:inline" src="alpha.gif">)</h2>
<p class="Body">The <a href="../lvpidmain/pid_vi_algs.html#der">derivative action</a> implemented by the <a href="../lvpid/PIDAdvanced.html">PID Advanced</a> VI is based on the backward method for derivative action. However, depending on the values of the derivative action, proportional gain, and sampling time, the controller could generate responses with fast oscillation, especially when performing autotuning with PID. To prevent this issue, this VI provides an <strong>alpha</strong> (<img style="display:inline" src="alpha.gif">) parameter that implements an additional filter for the derivative action (<em>D</em>). This filter reduces the bandwidth content as defined by:</p>
<p class="Anchor"><img src="noloc_eq_advderfilt.gif"></p>
<p class="Body"> where <em>T<sub>d</sub></em> is the derivative time in minutes, also called the rate time.</p><a name="errorcalc"></a><h2>Error-Squared PID Implemented by the Linearity Factor (L)</h2>
<p class="Body">
			
			
			
			
			
			
			
			The <strong>linearity</strong> input introduces linearity change on the gain, as shown in the following equations: </p>
<p class="Anchor"><img src="loc_eq_advpidbase.gif"></p>
<p class="Body">The error for calculating proportional action with two degree-of-freedom control is shown in the following formula:</p>
<p class="Anchor"><img src="loc_eq_advpropacte.gif"></p>
<table class="Borderless">
<tr>
<td>where</td>
<td><em>SP<sub>range</sub></em> is the range of the setpoint</td>
</tr>
<tr>
<td></td>
<td>� is the setpoint factor for the two degree-of-freedom PID algorithm described by the proportional action formula</td>
</tr>
<tr>
<td></td>
<td><em>L</em> is the linearity factor that produces a nonlinear gain term in which the controller gain increases with the magnitude of the error</td>
</tr>
</table>
<p class="Body">If <em>L</em> is 1, the controller is linear. A value of 0.1 makes the minimum gain of the controller 10% <em>K<sub>c</sub></em>. Use of a nonlinear gain term is referred to as an error-squared PID algorithm.</p>
</body>
</html>