<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><head><!--Generated from database. Edit in the database; do not edit this file.--><!--Poly VI id="58"--><!--LabVIEW VI path:vi.lib\measure\matone.llb\Harmonic Distortion Analyzer.vi--><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252"><meta http-equiv="Content-Style-Type" content="text/css"><TITLE>Harmonic Distortion Analyzer VI</TITLE><link rel="STYLESHEET" type="text/css" href="minimal.css"><script src="common.js" type="text/javascript"></script><script src="polyviselect.js" type="text/javascript"></script><script src="jquery-1.7.2.min.js" type="text/javascript"></script><script src="cssframes.js" type="text/javascript"></script><link media="print" rel="stylesheet" type="text/css" href="print.css"></head><body bgcolor="#ffffff"><noscript><p class="Body">JavaScript is disabled. <a href="../lvhelp/JavaScript_Disabled.html">Details</a></p><hr width="100%" noshade></noscript><div id="styleDivTitle"><!-- VI or Function Name --><H1>Harmonic Distortion Analyzer VI</H1><!--Owning Palette--><p class="Body"><strong>Owning Palette:</strong> <a href="../lvwave/Waveform_Measurement_VIs.html">Waveform Measurements VIs</a></p><!--Package and Platform--><p class="Body"><strong>Requires:</strong> Full Development System</p><!-- VI/Function Description --><p class="Body">Takes a signal in and performs a full harmonic analysis, including measuring the fundamental frequency tone and harmonics, and returning the fundamental frequency, all harmonic amplitude levels, and the total harmonic distortion (THD). Wire data to the <strong>signal in</strong> input to determine the polymorphic instance to use or <a href="../lvhowto/SelectingDefaultInstPolyVI.html">manually select</a> the instance.</p><!-- Supplemental VI/Function Information --><!-- Link to Additional VI/Function Information --><p class="Body"><a href="#details">Details</a>&nbsp;&nbsp;<a href="#examples">Example</a></p><!--Instance drop-down list--><p class="Body">Use the pull-down menu to select an instance of this VI.</p><table class="Borderless">   <tr>   <td>      <select name="site" size="1" onchange="polyVISelectHandler(this)">      <option value="">Select an instance</option>      <option value="#parent">Harmonic Distortion Analyzer 1 Chan</option><option value="#instance1">Harmonic Distortion Analyzer N Chan</option></select>   </td>      </tr>   </table><!--Add/Find Buttons--><table class="Borderless"><tr><td><a href="javascript:placeObject(object58);"><img src="add.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Add to the block diagram</td><td><a href="javascript:findObject(object58);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find on the palette</td></tr></table></div><div id="styleDivScrolling"><!--Parent Link Text --><h2><a name="parent">Harmonic Distortion Analyzer 1 Chan</a></h2><!-- Instance 1 Note --><!-- Parent Graphic Reference --><p class="Anchor"><img src="Harmonic_Distortion_Analyzer_1_Chan.gif"></p><!-- Table of VI/Function Parameters --><table class="Borderless"><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>stop search at Nyquist</strong> should be set to TRUE (default) to include only frequencies less than the Nyquist frequency, or half the sampling rate, in the harmonic search. When set to FALSE, this VI continues searching the frequency domain beyond Nyquist by assuming that these higher frequency components have aliased according to the following equation.<p class="Indent1">aliased f = Fs &#8211; (f modulo Fs)</p>where<p class="Indent1">Fs = 1/dt = sampling rate.</p></td></tr><tr><td class="Icon"><img src="cmsdt.gif"></td><td><strong>signal in</strong> is the input time-domain signal. </td></tr><tr><td class="Icon"><img src="cenum.gif"></td><td><strong>export mode</strong> selects the source of the signal and spectrum to export to <strong>exported signals</strong>. <br><br><table class="Bordered"><tr><td class = "Bordered">0</td><td class = "Bordered"><strong>none</strong>&#8212;Fastest computation</td></tr><tr><td class = "Bordered">1</td><td class = "Bordered"><strong>input signal</strong>&#8212;Input signal only</td></tr><tr><td class = "Bordered">2</td><td class = "Bordered"><strong>fundamental signal</strong>&#8212;Single sine tone</td></tr><tr><td class = "Bordered">3</td><td class = "Bordered"><strong>residual signal</strong>&#8212;Signal minus tone</td></tr><tr><td class = "Bordered">4</td><td class = "Bordered"><strong>harmonics only</strong>&#8212;Detected harmonics</td></tr><tr><td class = "Bordered">5</td><td class = "Bordered"><strong>noise and spurs</strong>&#8212;Signal minus tone and harmonics</td></tr></table></td></tr><tr><td class="Icon"><img src="ci32.gif"></td><td><strong>highest harmonic</strong> controls the highest harmonic, including the fundamental tone, used for the harmonic analysis. For example, for 3rd harmonic analysis, this control should be set to 3 to measure the fundamental, second, and third harmonic. </td></tr><tr><td class="Icon"><img src="cerrcodeclst.gif"></td><td><strong>error in</strong> describes error conditions that occur before this node runs. This input provides <a href="../lvconcepts/using_standard_error_in.html">standard error in</a> functionality. </td></tr><tr><td class="Icon"><img src="cnclst.gif"></td><td><strong>advanced search</strong> controls the frequency domain search area, which is the center frequency and width, used for finding the fundamental frequency tone of the signal. <table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>approx freq.</strong> is the center frequency used in the frequency domain search for the fundamental tone frequency. If set to the default value of &#8211;1.0, the tone with the highest amplitude is used as the fundamental tone. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>search</strong> is the frequency width, as a percentage of the sampling rate, for the frequency domain search for the fundamental tone frequency. </td></tr></table></td></tr><tr><td class="Icon"><img src="icclst.gif"></td><td><strong>exported signals</strong> contains the signals specified by <strong>export mode</strong>. <table class="Borderless"><tr><td class="Icon"><img src="imsdt.gif"></td><td><strong>exported time signal</strong> is the waveform containing the exported time signal as selected by <strong>export mode</strong>. </td></tr><tr><td class="Icon"><img src="icclst.gif"></td><td><strong>exported spectrum (dB)</strong> is the spectrum of the exported time signal as selected by <strong>export mode</strong>. <table class="Borderless"><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>f0</strong> returns the start frequency, in hertz, of the spectrum. </td></tr><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>df</strong> returns the frequency resolution, in hertz, of the spectrum. </td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>dB Spectrum (Hann)</strong> is the magnitude spectrum of the (Hanning) windowed input signal, expressed in dB relative to 1.0 Vrms^2 for input signals in units of volts (V). </td></tr></table></td></tr></table></td></tr><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>detected fundamental frequency</strong> contains the detected fundamental frequency resulting from searching the frequency domain. Use <strong>advanced search</strong> to set the frequency search range. All harmonics are measured at integer multiples of this fundamental frequency. </td></tr><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>THD</strong> contains the measured total harmonic distortion up to and including the <strong>highest harmonic</strong>. <strong>THD</strong> is defined as the ratio of the RMS sum of the harmonics to the amplitude of the fundamental tone. To compute THD as a percentage, you must multiply it by 100. </td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>components level</strong> contains the array of amplitudes of the measured harmonics in volts if the <strong>signal in</strong> is in volts. The array index is the harmonic number including 0 (DC), 1 (fundamental), 2 (second harmonic),... n (nth harmonic), up to and including the <strong>highest harmonic</strong>. </td></tr><tr><td class="Icon"><img src="ierrcodeclst.gif"></td><td><strong>error out</strong> contains error information. This output provides <a href="../lvconcepts/using_standard_error_out.html">standard error out</a> functionality. </td></tr><tr><td class="Icon"><img src="icclst.gif"></td><td><strong>measurement info</strong> returns information about your measurement, mainly warnings for inconsistencies in your input signal. <table class="Borderless"><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>uncertainty</strong> is reserved for future use. </td></tr><tr><td class="Icon"><img src="ibool.gif"></td><td><strong>Warning</strong> is TRUE if a warning is generated during processing. </td></tr><tr><td class="Icon"><img src="istr.gif"></td><td><strong>comments</strong> contains a warning message when <strong>Warning</strong> is TRUE. </td></tr></table></td></tr></table><!-- Instance 1 Link Text --><h2><a name="instance1">Harmonic Distortion Analyzer N Chan</a></h2><!--LabVIEW VI Inst Path:vi.lib\measure\matone.llb\Harmonic Distortion Analyzer N Chan.vi--><!-- Instance 1 Note --><p class="Body">The multichannel waveform array input should be the result of a multichannel acquisition where each element of the array of waveforms is a distinct and separate channel of data.</p><!-- Instance 1 Graphic Reference --><p class="Anchor"><img src="Harmonic_Distortion_Analyzer_N_Chan.gif"></p><!-- Table of VI/Function Parameters for Instance 1 --><table class="Borderless"><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>stop search at Nyquist</strong> should be set to TRUE (default) to include only frequencies less than the Nyquist frequency, or half the sampling rate, in the harmonic search. When set to FALSE, this VI continues searching the frequency domain beyond Nyquist by assuming that these higher frequency components have aliased according to the following equation.<p class="Indent1">aliased f = Fs &#8211; (f modulo Fs)</p>where<p class="Indent1">Fs = 1/dt = sampling rate.</p></td></tr><tr><td class="Icon"><img src="c1dmsdt.gif"></td><td><strong>signals in</strong> is the array of input time-domain signals. </td></tr><tr><td class="Icon"><img src="cenum.gif"></td><td><strong>export mode</strong> selects the source of the signal and spectrum to export to <strong>exported signals</strong>. <br><br><table class="Bordered"><tr><td class = "Bordered">0</td><td class = "Bordered"><strong>none</strong>&#8212;Fastest computation</td></tr><tr><td class = "Bordered">1</td><td class = "Bordered"><strong>input signal</strong>&#8212;Input signal only</td></tr><tr><td class = "Bordered">2</td><td class = "Bordered"><strong>fundamental signal</strong>&#8212;Single sine tone</td></tr><tr><td class = "Bordered">3</td><td class = "Bordered"><strong>residual signal</strong>&#8212;Signal minus tone</td></tr><tr><td class = "Bordered">4</td><td class = "Bordered"><strong>harmonics only</strong>&#8212;Detected harmonics</td></tr><tr><td class = "Bordered">5</td><td class = "Bordered"><strong>noise and spurs</strong>&#8212;Signal minus tone and harmonics</td></tr></table></td></tr><tr><td class="Icon"><img src="ci32.gif"></td><td><strong>highest harmonic</strong> controls the highest harmonic, including the fundamental tone, used for the harmonic analysis. For example, for 3rd harmonic analysis, this control should be set to 3 to measure the fundamental, second, and third harmonic. </td></tr><tr><td class="Icon"><img src="cerrcodeclst.gif"></td><td><strong>error in</strong> describes error conditions that occur before this node runs. This input provides <a href="../lvconcepts/using_standard_error_in.html">standard error in</a> functionality. </td></tr><tr><td class="Icon"><img src="cnclst.gif"></td><td><strong>advanced search</strong> controls the frequency domain search area, which is the center frequency and width, used for finding the fundamental frequency tone of the signal. <table class="Borderless"><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>approx freq.</strong> is the center frequency used in the frequency domain search for the fundamental tone frequency. If set to the default value of &#8211;1.0, the tone with the highest amplitude is used as the fundamental tone. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>search</strong> is the frequency width, as a percentage of the sampling rate, for the frequency domain search for the fundamental tone frequency. </td></tr></table></td></tr><tr><td class="Icon"><img src="i1dcclst.gif"></td><td><strong>exported signals</strong> is an array of exported signals. <table class="Borderless"><tr><td class="Icon"><img src="imsdt.gif"></td><td><strong>exported time signal</strong> is the waveform containing the exported time signal as selected by <strong>export mode</strong>. </td></tr><tr><td class="Icon"><img src="icclst.gif"></td><td><strong>exported spectrum (dB)</strong> is the spectrum of the exported time signal as selected by <strong>export mode</strong>. <table class="Borderless"><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>f0</strong> returns the start frequency, in hertz, of the spectrum. </td></tr><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>df</strong> returns the frequency resolution, in hertz, of the spectrum. </td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>dB Spectrum (Hann)</strong> is the magnitude spectrum of the (Hanning) windowed input signal, expressed in dB relative to 1.0 Vrms^2 for input signals in units of volts (V). </td></tr></table></td></tr></table></td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>detected fundamental frequencies</strong> is an array containing the detected fundamental frequency resulting from searching the frequency domain for each waveform. </td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>THD</strong> returns an array containing the measured total harmonic distortion for each waveform. </td></tr><tr><td class="Icon"><img src="i1dcclst.gif"></td><td><strong>components levels</strong> is a cluster containing an array of amplitudes of the measured harmonics for each waveform. <table class="Borderless"><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>components level</strong> contains the array of amplitudes of the measured harmonics in volts if the <strong>signal in</strong> is in volts. The array index is the harmonic number including 0 (DC), 1 (fundamental), 2 (second harmonic),... n (nth harmonic), up to and including the <strong>highest harmonic</strong>. </td></tr></table></td></tr><tr><td class="Icon"><img src="ierrcodeclst.gif"></td><td><strong>error out</strong> contains error information. This output provides <a href="../lvconcepts/using_standard_error_out.html">standard error out</a> functionality. </td></tr><tr><td class="Icon"><img src="i1dcclst.gif"></td><td><strong>measurements info</strong> is an array that returns information about your measurement, mainly warnings for inconsistencies in your input signal. <table class="Borderless"><tr><td class="Icon"><img src="idbl.gif"></td><td><strong>uncertainty</strong> is reserved for future use. </td></tr><tr><td class="Icon"><img src="ibool.gif"></td><td><strong>Warning</strong> is TRUE if a warning is generated during processing. </td></tr><tr><td class="Icon"><img src="istr.gif"></td><td><strong>comments</strong> contains a warning message when <strong>Warning</strong> is TRUE. </td></tr></table></td></tr></table><!-- Additional VI/Function Information --><h2><a name="details">Harmonic Distortion Analyzer Details</a></h2><p class="Body">This VI is designed to process a single channel or multiple channels continuously, typically from within a <a href="../glang/For_Loop.html">For Loop</a> or a <a href="../glang/While_Loop.html">While Loop</a>.</p><!--Module Specific Content--><script type="text/javascript">if (typeof(writeVarRefs)=="function"){writeVarRefs("58");}</script><!-- Example Information --><h2><a name="examples">Example</a></h2><p class="Body">Refer to the Multitone with Amplitudes and Phases VI in the <span class="Monospace">labview\examples\Signal Processing\Waveform Measurements</span> directory for an example of using the Harmonic Distortion Analyzer VI.</p><p class="Body"><a href="javascript:openVI('examples%5C%5CSignal%20Processing%5C%5CWaveform%20Measurements%5C%5CMultitone%20with%20Amplitudes%20and%20Phases.vi');"><img src="open.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Open example&nbsp;<a href="javascript:findExamples(3157);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find related examples</p></div></body></HTML>