<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><head><!--Generated from database. Edit in the database; do not edit this file.--><!--Poly VI id="88"--><!--LabVIEW VI path:vi.lib\measure\mamon.llb\Waveform Peak Detection.vi--><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1252"><meta http-equiv="Content-Style-Type" content="text/css"><TITLE>Waveform Peak Detection VI</TITLE><link rel="STYLESHEET" type="text/css" href="minimal.css"><script src="common.js" type="text/javascript"></script><script src="polyviselect.js" type="text/javascript"></script><script src="jquery-1.7.2.min.js" type="text/javascript"></script><script src="cssframes.js" type="text/javascript"></script><link media="print" rel="stylesheet" type="text/css" href="print.css"></head><body bgcolor="#ffffff"><noscript><p class="Body">JavaScript is disabled. <a href="../lvhelp/JavaScript_Disabled.html">Details</a></p><hr width="100%" noshade></noscript><div id="styleDivTitle"><!-- VI or Function Name --><H1>Waveform Peak Detection VI</H1><!--Owning Palette--><p class="Body"><strong>Owning Palette:</strong> <a href="../lvwave/Waveform_Monitoring_VIs.html">Waveform Monitoring VIs</a></p><!--Package and Platform--><p class="Body"><strong>Requires:</strong> Full Development System</p><!-- VI/Function Description --><p class="Body">Finds the locations, amplitudes, and second derivatives of peaks and valleys in <strong>Signal In</strong>. Wire data to the <strong>Signal In</strong> input to determine the polymorphic instance to use or <a href="../lvhowto/SelectingDefaultInstPolyVI.html">manually select</a> the instance.</p><!-- Supplemental VI/Function Information --><p class="Body">This VI is similar to the <a href="../lvanls/Peak_Detector.html">Peak Detector</a> VI.</p><!-- Link to Additional VI/Function Information --><p class="Body"><a href="#details">Details</a>&nbsp;&nbsp;</p><!--Instance drop-down list--><p class="Body">Use the pull-down menu to select an instance of this VI.</p><table class="Borderless">   <tr>   <td>      <select name="site" size="1" onchange="polyVISelectHandler(this)">      <option value="">Select an instance</option>      <option value="#parent">Waveform Peak Detection for 1 Chan</option><option value="#instance1">Waveform Peak Detection for N Chan</option></select>   </td>      </tr>   </table><!--Add/Find Buttons--><table class="Borderless"><tr><td><a href="javascript:placeObject(object88);"><img src="add.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Add to the block diagram</td><td><a href="javascript:findObject(object88);"><img src="find.gif" border="0" style="padding-bottom: 4px; vertical-align: middle"></a>&nbsp;Find on the palette</td></tr></table></div><div id="styleDivScrolling"><!--Parent Link Text --><h2><a name="parent">Waveform Peak Detection for 1 Chan</a></h2><!-- Instance 1 Note --><!-- Parent Graphic Reference --><p class="Anchor"><img src="Waveform_Peak_Detection_for_1_Chan.gif"></p><!-- Table of VI/Function Parameters --><table class="Borderless"><tr><td class="Icon"><img src="cu16.gif"></td><td><strong>peaks/valleys</strong> indicates whether to find peaks or valleys. <br><br><table class="Bordered"><tr><td class = "Bordered">0</td><td class = "Bordered">Peaks</td></tr><tr><td class = "Bordered">1</td><td class = "Bordered">Valleys</td></tr></table></td></tr><tr><td class="Icon"><img src="cmsdt.gif"></td><td><strong>Signal In</strong> contains the waveform in which to find peaks or valleys. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>threshold</strong> instructs the VI to ignore peaks and valleys that are too small. The VI ignores peaks if the fitted amplitude is less than <strong>threshold</strong>. The VI ignores valleys if the fitted trough is greater than <strong>threshold</strong>. </td></tr><tr><td class="Icon"><img src="ci32.gif"></td><td><strong>width</strong> specifies the number of consecutive data points to use in the quadratic least squares fit. The value should be no more than about 1/2 of the half-width of the peak/valley and can be much smaller (but &gt; 2) for noise-free data. Large widths can reduce the apparent amplitude of peaks and shift the apparent location. For noisy data, this modification is not important because the noise obscures the actual peak. </td></tr><tr><td class="Icon"><img src="cerrcodeclst.gif"></td><td><strong>error in</strong> describes error conditions that occur before this node runs. This input provides <a href="../lvconcepts/using_standard_error_in.html">standard error in</a> functionality. </td></tr><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>initialize</strong>, when TRUE (default), causes the VI to process the first block of data. The VI requires some internal setup that must be done at the start for proper operation. </td></tr><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>end of data (T)</strong>, when TRUE (default), causes the VI to process the last block of data. The VI cleans up internal data after the last block has been processed. </td></tr><tr><td class="Icon"><img src="ii32.gif"></td><td><strong># found</strong> is the number of <strong>peaks/valleys</strong> found in the current block of data. <strong># found</strong> is the size of the arrays <strong>Locations</strong>, <strong>Amplitudes</strong>, and <strong>2nd Derivatives</strong>. </td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>Locations</strong> contains the index locations of all peaks or valleys detected in the current block of data. Because the peak detection algorithm uses a quadratic fit to find the peaks, it actually interpolates between the data points. Therefore, the indexes are not integers. In other words, the peaks found are not necessarily actual points in the input data but may be at fractions of an index and at amplitudes not found in the input array.<br><br>To view the locations in terms of time, use the following equation.<p class="Indent1">Time Locations[<em>i</em>] = <em>t0</em> + <em>dt</em>*Locations[<em>i</em>]</p></td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>Amplitudes</strong> contains the amplitudes of peaks or valleys found in the current block of data. <table class="Borderless"><tr><td class="Icon"><img src="note.gif"></td><td><strong>Note</strong>&nbsp;&nbsp;The <strong>Locations</strong> and <strong>Amplitudes</strong> might deviate from actual peaks or valleys for noisy signals with large dynamic ranges.</td></tr></table></td></tr><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>2nd Derivatives</strong> gives measurements of the second derivative of the amplitude at each of the peaks or valleys found in the current block of data. <strong>2nd Derivatives</strong> gives an approximate measure of the sharpness of each peak or valley. If you are detecting peaks, these values are all negative. If you are detecting valleys, the values are all positive.<table class="Borderless"><tr><td class="Icon"><img src="note.gif"></td><td><strong>Note</strong>&nbsp;&nbsp;It is assumed that <em>dt</em>, the time difference between samples, is equal to 1.</td></tr></table></td></tr><tr><td class="Icon"><img src="ierrcodeclst.gif"></td><td><strong>error out</strong> contains error information. This output provides <a href="../lvconcepts/using_standard_error_out.html">standard error out</a> functionality. </td></tr></table><!-- Instance 1 Link Text --><h2><a name="instance1">Waveform Peak Detection for N Chan</a></h2><!--LabVIEW VI Inst Path:vi.lib\measure\mamon.llb\Waveform Peak Detection for N Chan.vi--><!-- Instance 1 Note --><!-- Instance 1 Graphic Reference --><p class="Anchor"><img src="Waveform_Peak_Detection_for_N_Chan.gif"></p><!-- Table of VI/Function Parameters for Instance 1 --><table class="Borderless"><tr><td class="Icon"><img src="cu16.gif"></td><td><strong>peaks/valleys</strong> indicates whether to find peaks or valleys. <br><br><table class="Bordered"><tr><td class = "Bordered">0</td><td class = "Bordered">Peaks</td></tr><tr><td class = "Bordered">1</td><td class = "Bordered">Valleys</td></tr></table></td></tr><tr><td class="Icon"><img src="c1dmsdt.gif"></td><td><strong>Signals In</strong> contains the waveforms in which to find peaks or valleys. </td></tr><tr><td class="Icon"><img src="cdbl.gif"></td><td><strong>threshold</strong> instructs the VI to ignore peaks and valleys that are too small. The VI ignores peaks if the fitted amplitude is less than <strong>threshold</strong>. The VI ignores valleys if the fitted trough is greater than <strong>threshold</strong>. </td></tr><tr><td class="Icon"><img src="ci32.gif"></td><td><strong>width</strong> specifies the number of consecutive data points to use in the quadratic least squares fit. The value should be no more than about 1/2 of the half-width of the peak/valley and can be much smaller (but &gt; 2) for noise-free data. Large widths can reduce the apparent amplitude of peaks and shift the apparent location. For noisy data, this modification is not important because the noise obscures the actual peak. </td></tr><tr><td class="Icon"><img src="cerrcodeclst.gif"></td><td><strong>error in</strong> describes error conditions that occur before this node runs. This input provides <a href="../lvconcepts/using_standard_error_in.html">standard error in</a> functionality. </td></tr><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>initialize</strong>, when TRUE (default), causes the VI to process the first block of data. The VI requires some internal setup that must be done at the start for proper operation. </td></tr><tr><td class="Icon"><img src="cbool.gif"></td><td><strong>end of data (T)</strong>, when TRUE (default), causes the VI to process the last block of data. The VI cleans up internal data after the last block has been processed. </td></tr><tr><td class="Icon"><img src="ii32.gif"></td><td><strong># found</strong> is the number of <strong>peaks/valleys</strong> found in the current block of data. <strong># found</strong> is the size of the arrays <strong>Locations</strong>, <strong>Amplitudes</strong>, and <strong>2nd Derivatives</strong>. </td></tr><tr><td class="Icon"><img src="i1dcclst.gif"></td><td><strong>Locations</strong> contains the index locations of all peaks or valleys detected in the current block of data for each waveform. <table class="Borderless"><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>Locations</strong> contains the index locations of all peaks or valleys detected in the current block of data. Because the peak detection algorithm uses a quadratic fit to find the peaks, it actually interpolates between the data points. Therefore, the indexes are not integers. In other words, the peaks found are not necessarily actual points in the input data but may be at fractions of an index and at amplitudes not found in the input array.<br><br>To view the locations in terms of time, use the following equation.<p class="Indent1">Time Locations[<em>i</em>] = <em>t0</em> + <em>dt</em>*Locations[<em>i</em>]</p></td></tr></table></td></tr><tr><td class="Icon"><img src="i1dcclst.gif"></td><td><strong>Amplitudes</strong> contains the amplitudes of peaks or valleys found in the current block of data for each waveform. <table class="Borderless"><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>Amplitudes</strong> contains the amplitudes of peaks or valleys found in the current block of data. <table class="Borderless"><tr><td class="Icon"><img src="note.gif"></td><td><strong>Note</strong>&nbsp;&nbsp;The <strong>Locations</strong> and <strong>Amplitudes</strong> might deviate from actual peaks or valleys for noisy signals with large dynamic ranges.</td></tr></table></td></tr></table></td></tr><tr><td class="Icon"><img src="i1dcclst.gif"></td><td><strong>2nd Derivatives</strong> gives measurements of the second derivative of the amplitude at each of the peaks or valleys found in the current block of data for each waveform. <table class="Borderless"><tr><td class="Icon"><img src="i1ddbl.gif"></td><td><strong>2nd Derivatives</strong> gives measurements of the second derivative of the amplitude at each of the peaks or valleys found in the current block of data. <strong>2nd Derivatives</strong> gives an approximate measure of the sharpness of each peak or valley. If you are detecting peaks, these values are all negative. If you are detecting valleys, the values are all positive.<table class="Borderless"><tr><td class="Icon"><img src="note.gif"></td><td><strong>Note</strong>&nbsp;&nbsp;It is assumed that <em>dt</em>, the time difference between samples, is equal to 1.</td></tr></table></td></tr></table></td></tr><tr><td class="Icon"><img src="ierrcodeclst.gif"></td><td><strong>error out</strong> contains error information. This output provides <a href="../lvconcepts/using_standard_error_out.html">standard error out</a> functionality. </td></tr></table><!-- Additional VI/Function Information --><h2><a name="details">Waveform Peak Detection Details</a></h2><p class="Body">Refer to the <a href="javascript:WWW(WWW_Peak_Detect)">support document</a> at <span class="Monospace">ni.com</span> for more information about peak detection using LabVIEW.</p><!--Module Specific Content--><script type="text/javascript">if (typeof(writeVarRefs)=="function"){writeVarRefs("88");}</script><!-- Example Information --></div></body></HTML>